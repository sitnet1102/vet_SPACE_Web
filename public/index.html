<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
		integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
	<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-firestore.js"></script>
	
	<style>
		* {
			margin: 0px;
			padding: 0px;
			font-family: sans-serif;
		}
	
		.main-div {
			width: 100%;
			height: 100%;
			background-color: rgb(0, 83, 42);
		}
	
		.main-div h1 {
			text-align: center;
			margin: 10px;
			color: white;
		}
	
		.main-div h2 {
			text-align: center;
			margin: 20px;
			color: white;
		}
	
		#blank {
			width: 40px;
			height: 160px;
		}
	
		#blank2 {
			width: 40px;
			height: 691px;
		}
	
		.loginForm {
			position: absolute;
			width: 300px;
			height: 350px;
			padding: 30px, 20px;
			/*background-color:#FFFFFF;*/
			background-color: #FFFFFF;
			text-align: center;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			border-radius: 15px;
		}
	
	
		.loginForm h2 {
			text-align: center;
			margin: 30px;
			color: black;
		}
	
		.idForm {
			border-bottom: 2px solid #adadad;
			margin: 30px;
			padding: 10px 10px;
		}
	
		.passForm {
			border-bottom: 2px solid #adadad;
			margin: 30px;
			padding: 10px 10px;
		}
	
		.id {
			width: 100%;
			border: none;
			outline: none;
			color: #636e72;
			font-size: 16px;
			height: 25px;
			background: none;
		}
	
		.pw {
			width: 100%;
			border: none;
			outline: none;
			color: #636e72;
			font-size: 16px;
			height: 25px;
			background: none;
		}
	
		.btn {
			position: relative;
			left: 40%;
			transform: translateX(-50%);
			margin-bottom: 20px;
			width: 80%;
			height: 40px;
			background: linear-gradient(125deg, rgb(3, 107, 63), rgb(176, 205, 166), rgb(3, 107, 63));
			background-position: left;
			background-size: 200%;
			color: white;
			font-weight: bold;
			border: none;
			cursor: pointer;
			transition: 0.4s;
			display: inline;
		}
	
		#pw_reset {
			text-decoration: underline;
			font-size: 14px;
		}
	
		/*
				rgb(240,167,4)
				*/
	
		.btn:hover {
			background-position: right;
		}
	
		.bottomText {
			text-align: center;
		}
	
		.pw_modal-wrapper {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
			display: none;
			justify-content: center;
			align-items: center;
		}
	
		.pw_modal-box {
			background: white;
			width: 400px;
			height: 200px;
			border-radius: 10px;
		}
	
		.pw_modal-title {
			text-align: center;
		}
	
		.pw_modal-content {
			margin-left: 50px;
		}
	
		.pw_modal-btn-box {
			text-align: center;
		}
	
		#pw_tmp {
			text-align: center;
			margin-left: 20px;
			margin-right: 20px;
			width: 360px;
			height: 40px;
		}
	
		#pw_modal-confirm-btn,
		#pw_modal-close-btn {
			/*padding: 5px 20px;*/
			width: 100px;
			height: 30px;
			margin-left: 10px;
			margin-right: 10px;
		}
	
	
	
	
	
		/* main Style*/
		* {
			margin: 0;
			padding: 0;
			color: #000;
			box-sizing: border-box;
		}
	
		.fn-font {
			font-family: 'Noto Sans KR', sans-serif;
		}
	
		ul {
			list-style: none;
		}
	
		a {
			outline: none;
		}
	
		.container {
			width: 1400px;
			margin: 0 auto;
		}
	
		header,
		section,
		nav,
		aside,
		.title {
			border-bottom: 1px solid rgb(0, 83, 42);
			border-top: 1px solid rgb(0, 83, 42);
		}
	
		header {
			height: 40px;
			background-color: rgb(0, 83, 42);
			justify-content: center;
			align-content: center;
		}
	
		#item,
		#divor,
		#help,
		#display_name {
			text-align: center;
			color: white;
			position: relative;
			top: 25%;
			float: right;
		}
	
		#display_name {
			margin-right: 10px;
		}
	
		#help {
			float: left;
		}
	
		#help a {
			color: white;
		}
	
		#item {
			margin-right: 10px;
			margin-left: 10px;
		}
	
		section {
			height: 80px;
			background-color: white;
			display: flex;
			align-items: flex-start;
		}
	
		nav {
			float: left;
			height: 848px;
			width: 190px;
			background-color: rgb(110, 120, 139);
		}
	
		.nav_title {
			text-align: center;
			width: 100%;
			height: 60px;
			display: flex;
			align-items: center;
			color: white;
		}
	
		.nav_title_Text {
			font-size: 18px;
			margin-left: 20px;
			color: white;
		}
	
		#explain {
			color: white;
			width: 100px;
			height: 20px;
			float: left;
		}
	
		#blank_box {
			height: 10px;
			width: 100%;
		}
	
		#blank_box2 {
			height: 60px;
			width: 200px;
		}
	
		section ul {
			width: 100%;
			height: 100%;
			display: flex;
		}
	
		section ul li {
			height: 100%;
			display: flex;
			align-items: center;
		}
	
		section ul li img {
			margin: 10px;
		}
	
		.item2 {
			margin-top: 5px;
			margin-left: 30px;
			font-size: 28px;
		}
	
		#section_blank {
			width: 250px;
			height: 100%;
		}
	
		aside {
			float: left;
			background-color: white;
			width: 1210px;
			height: 848px;
		}
	
		#logout {
			color: white;
			background-color: rgb(0, 83, 42);
		}
	
		.title {
			width: 100%;
			height: 60px;
			background-color: rgb(236, 235, 227);
			display: flex;
			align-items: center;
		}
	
		.title_Text {
			font-size: 28px;
			margin-left: 20px;
		}
	
		#div_01,
		#div_02,
		#div_03 {
			width: 100%;
			height: 100%;
		}
	
		.content_00,
		#content_01,
		#content_02,
		#content_03,
		#content_04 {
			width: 100%;
			height: 718px;
		}
	
		.select_box {
			margin-left: 1%;
			width: 98%;
			height: 60px;
			border-bottom: 1px solid rgb(0, 83, 42);
		}
	
		.selected_box_title {
			float: left;
			margin-left: 20px;
			position: relative;
			top: 35%;
			font-size: 16px;
		}
	
		.selected_box_title input {
			width: 150px;
			height: 24px;
			font-size: 16px;
		}
		.selected_box_title select {
		}
		.roomSel {
			width: 200px;
			height: 24px;
			font-size: 14px;
		}
		.stateSel {
			width: 70px;
			height: 24px;
			font-size: 16px;
		}
	
		.selected_box_title2 {
			float: right;
			margin-left: 20px;
			position: relative;
			top: 35%;
		}
	
		#selected_box_title3 {
			float: right;
			margin-left: 20px;
			position: relative;
			top: 35%;
			width: 20%;
			border: 1px solid rgb(0, 83, 42);
		}
	
		.selected_box_title2 button {
			width: 80px;
			height: 24px;
			background-color: white;
			/*background-color: rgb(0, 83, 42);*/
			/*background-color: rgb(26,110,240);*/
			border-radius: 5px;
		}
		.btnText {
			font-size: 16px;
		}

		#delBtn {
			background-color: red;
			border-color: red;
			/*background-color: #FFC0CB;*/
		}
		.delText {
			font-size: 16px;
			color: white;
			/*color: rgb(233,112,140);*/
		}
		#confBtn {
			background-color: blue;
			border-color: blue;
		}
		.confText {
			font-size: 16px;
			color: white;
			/*color: rgb(97, 167, 221);*/
		}
	
		.table {
			width: 1200px;
			height: 708px;
			margin: 10px;
			border: 2px solid rgb(0, 83, 42);
			font-size: 12px;
			overflow-x: scroll;
			overflow-y: scroll;
		}
	
		.table_01 {
			border-top: none;
			border-bottom: 1px solid rgb(0, 83, 42);
			border-right: none;
			border-left: none;
			border-collapse: separate;
			border-spacing: 1px;
			text-align: center;
			line-height: 1.5;
		}
	
		.table_01 th {
			width: 300px;
			height: 20px;
			border-bottom: 1px solid rgb(0, 83, 42);
			font-weight: bold;
			position: sticky;
			top: 0px;
			background-color: white;
		}
	
		.table_01 td {
			width: 300px;
			height: 20px;
			background: #eee;
			justify-items: center;
		}
	
		#reserv_box {
			width: 810px;
			height: 628px;
			margin-left: 200px;
			margin-right: 200px;
			margin-top: 50px;
			margin-bottom: 50px;
		}
	
		#reserv_content_box {
			width: 50%;
			/*405px*/
			height: 100%;
			/*628px*/
			float: left;
		}
	
		.reserv_content_box2 {
			width: 25%;
			/*202.5px*/
			height: 100%;
			/*628px*/
			float: left;
		}
	
		.reserv_content {
			width: 100%;
			height: 60px;
			font-size: 20px;
		}
	
		.reserv_content input,
		#room_id,
		#purpose {
			width: 200px;
			height: 30px;
			font-size: 20px;
			float: right;
			text-align: center;
		}
	
		#start_time_hour,
		#start_time_min,
		#end_time_hour,
		#end_time_min {
			width: 100px;
			height: 30px;
			font-size: 20px;
			float: right;
			text-align: center;
		}
	
		.reserv_content button {
			width: 100px;
			height: 30px;
			font-size: 20px;
			margin-left: 152.5px;
		}
	
		.download_box {
			text-align: center;
			vertical-align: center;
			width: 100%;
			height: 50px;
			margin-top: 60px;
		}
	
		.download_box a {
			font-size: 30px;
		}
	
	
		/**/
		.modal-wrapper {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
			display: none;
			justify-content: center;
			align-items: center;
		}
	
		.modal-box {
			background: white;
			width: 600px;
			height: 600px;
			border-radius: 10px;
		}
	
		.modal-title {
			text-align: center;
		}
	
		.modal-content {
			margin-left: 50px;
		}
	
		.modal-close-box {
			text-align: right;
			margin-right: 10px;
		}
	
		.modal-close-btn {
			width: 50px;
			height: 30px;
			font-size: 20px;
		}


		button .btnDisable {
            visibility: hidden;
        }

        button:disabled .btnDisable {
            visibility: visible;
        }

        button:disabled .btnText {
            visibility: hidden;
        }
        
        button .btnDisable span {
            position: absolute;
			display: block;
			top: 0px;
            width: 5px; 
            height: 5px;
            background: #555;
            border-radius: 50%;
        }

        button .btnDisable span:first-child {
            left: 20px;
            animation-delay: 0s;
            animation-duration: 1s;
            animation-name: dot;
            animation-direction: alternate;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }
        
        button .btnDisable span:nth-child(2) {
            left: 37.5px;
            animation-delay: .2s;
            animation-duration: 1s;
            animation-name: dot;
            animation-direction: alternate;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }

        button .btnDisable span:last-child {
            left: 55px;
            animation-delay: .4s;
            animation-duration: 1s;
            animation-name: dot;
            animation-direction: alternate;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }

        @keyframes dot {
            100% {
                top: 15px;
            } 50% {
                top: 5px;
            } 0% {
                top: 15px;
            }
        }		
	</style>
</head>
<body width="100%" height="100%">
	<div id="login_div" class="main-div">
		<div id='blank'></div>
		<h1>건국대학교 수의대</h1>
		<h2>강의실 예약 관리자 페이지</h2>
		<form action="loginPro.jsp" method="post" class="loginForm">
			<h2>로그인(Login)</h2>
			<div class="idForm">
				<input id="idInput" name="email" type="text" class="id" placeholder="이메일(E-Mail)">
			</div>
			<div class="passForm">
				<input id="pwInput" name="password" type="password" class="pw" placeholder="비밀번호(Password)">
			</div>
			<button type="button" class="btn" onclick="login()">
				로그인(Login)
			</button>
			<div>
				<a id="pw_reset">
					비밀번호 재설정
				</a>
			</div>
		</form>
		<div id='blank2'></div>
		<div class="pw_modal-wrapper">
			<div class="pw_modal-box">
				<br>
				<br>
				<p class="pw_modal-title">비밀번호를 재설정할 이메일을 입력해주새요</p>
				<br>
				<input id="pw_tmp" type="text">
				<br>
				<br>
				<div class="pw_modal-btn-box">
					<button id="pw_modal-confirm-btn">재설정</button>
					<button id="pw_modal-close-btn">취소</button>
				</div>
				<br>
			</div>
		</div>
		<script>
			function pwReset() {
				const email = document.getElementById("pw_tmp").value;
				document.getElementById("pw_tmp").value = null;
				firebase.auth().sendPasswordResetEmail(email)
					.then(() => {
						alert('비밀번호 재설정 이메일이 발송되었습니다.');
					})
					.catch((error) => {
						var errorCode = error.code;
						var errorMessage = error.message;
						if (errorCode === "auth/user-not-found") {
							alert('존재하지 않는 이메일 입니다.');
						} else {
							console.log(errorCode, errorMessage);
						}
					});
			}
		</script>
		<script>
			const pwmodalOpenBtn = document.getElementById("pw_reset");
			const pwmodalCloseBtn = document.getElementById("pw_modal-close-btn");
			const pwmodalConfirmBtn = document.getElementById("pw_modal-confirm-btn");
			const pwmodalWrapper = document.querySelector(".pw_modal-wrapper");

			pwmodalOpenBtn.addEventListener("click", () => {
				pwmodalWrapper.style.display = "flex";
			});

			pwmodalCloseBtn.addEventListener("click", e => {
				document.getElementById("pw_tmp").value = null;
				pwmodalWrapper.style.display = "none";
			});

			pwmodalConfirmBtn.addEventListener("click", e => {
				if (document.getElementById("pw_tmp").value.trim() === "") {
					alert('이메일을 입력하세요');
				} else if (document.getElementById("pw_tmp").value.indexOf('@') === -1) {
					alert('올바르지 않은 이메일 형식입니다.');
				} else {
					pwmodalWrapper.style.display = "none";
					pwReset();
				}
			});

			pwmodalWrapper.addEventListener("click", e => {
			});
		</script>
	</div>
	<div id="user_div" class="loggedin-div" style="display: none;">
		<script type="text/javascript">
			function show_layer(div_name) {
				document.all.div_01.style.display = "none";
				document.all.div_02.style.display = "none";
				document.all.div_03.style.display = "none";
				document.all.div_04.style.display = "none";
				document.all.div_05.style.display = "none";
				document.all.nav_01.style.display = "none";
				document.all.nav_02.style.display = "none";
				document.all.nav_03.style.display = "none";
				document.all.nav_04.style.display = "none";
				document.all.nav_05.style.display = "none";
				document.all.explain_01.style.display = "none";
				document.all.explain_02.style.display = "none";
				document.all.explain_03.style.display = "none";
				document.all.explain_04.style.display = "none";
				document.all.explain_05.style.display = "none";
				document.all.explain_06.style.display = "none";
				document.all.explain_07.style.display = "none";
				document.all.explain_08.style.display = "none";
				switch (div_name) {
					case '1':
						document.all.div_01.style.display = "";
						document.all.nav_01.style.display = "";
						document.all.explain_01.style.display = "";
						break;
					case '2':
						document.all.div_02.style.display = "";
						document.all.nav_02.style.display = "";
						document.all.explain_05.style.display = "";
						break;
					case '3':
						document.all.div_03.style.display = "";
						document.all.nav_03.style.display = "";
						document.all.explain_06.style.display = "";
						break;
					case '4':
						document.all.div_04.style.display = "";
						document.all.nav_04.style.display = "";
						document.all.explain_07.style.display = "";
						break;
					case '5':
						document.all.div_05.style.display = "";
						document.all.nav_05.style.display = "";
						document.all.explain_08.style.display = "";
						break;
				}
			}
		</script>
		<script type="text/javascript">
			function show_content(div_name) {
				document.all.content_01.style.display = "none";
				document.all.content_02.style.display = "none";
				document.all.content_03.style.display = "none";
				document.all.content_04.style.display = "none";
				document.all.content_01_title.style.display = "none";
				document.all.content_02_title.style.display = "none";
				document.all.content_03_title.style.display = "none";
				document.all.content_04_title.style.display = "none";
				document.all.explain_01.style.display = "none";
				document.all.explain_02.style.display = "none";
				document.all.explain_03.style.display = "none";
				document.all.explain_04.style.display = "none";
				document.all.explain_05.style.display = "none";
				document.all.explain_06.style.display = "none";
				document.all.explain_07.style.display = "none";
				document.all.explain_08.style.display = "none";
				switch (div_name) {
					case '1':
						document.all.content_01.style.display = "";
						document.all.content_01_title.style.display = "";
						document.all.explain_01.style.display = "";
						break;
					case '2':
						document.all.content_02.style.display = "";
						document.all.content_02_title.style.display = "";
						document.all.explain_02.style.display = "";
						break;
					case '3':
						document.all.content_03.style.display = "";
						document.all.content_03_title.style.display = "";
						document.all.explain_03.style.display = "";
						break;
					case '4':
						document.all.content_04.style.display = "";
						document.all.content_04_title.style.display = "";
						document.all.explain_04.style.display = "";
						break;
				}
			}
		</script>
		<script>
			function selectAll(selectAll) {
				const checkboxes = document.getElementsByName(selectAll.name);
				checkboxes.forEach((checkbox) => {
					checkbox.checked = selectAll.checked;
				})
			}
		</script>
		<div class="container">
			<header>
				<div id="help">
					<a id="explain"><i class="fas fa-exclamation-circle" style="color:white"></i> 도움말</a>
				</div>
				<div id='item'>
					<a id='logout' href="javascript:logout()">
						로그아웃
					</a>
				</div>
				<div id='divor'> | </div>
				<div id='display_name'></div>
			</header>
			<section>
				<ul>
					<li><a href="javascript:location.reload()"><img class="ku_logo"
								src="https://firebasestorage.googleapis.com/v0/b/konkuk-vet-space.appspot.com/o/%E1%84%80%E1%85%A5%E1%86%AB%E1%84%80%E1%85%AE%E1%86%A8%E1%84%83%E1%85%A2%20%E1%84%85%E1%85%A9%E1%84%80%E1%85%A91.gif?alt=media&token=4529e79d-226b-40ca-98a8-2806e1d78e5e"
								height="60px" alt="ku logo"></a></li>
					<li><a id='section_blank'></a></li>
					<li><a class='item2' href="javascript:show_layer('1')">예약조회</a></li>
					<li><a class='item2' href="javascript:show_layer('2')">예약하기</a></li>
					<li><a class='item2' href="javascript:show_layer('3')">대량등록</a></li>
					<li><a class='item2' href="javascript:show_layer('4')">다운로드</a></li>
					<li><a class='item2' href="javascript:show_layer('5')">노션링크</a></li>
				</ul>
			</section>
			<nav>
				<div id=nav_01>
					<div id="blank_box"></div>
					<div class="nav_title">
						<u>
							<a class="nav_title_Text" href="javascript:show_content('1')">전체 예약 조회하기</a>
						</u>
					</div>
					<div class="nav_title">
						<u>
							<a class="nav_title_Text" href="javascript:show_content('2')">대기 예약 조회하기</a>
						</u>
					</div>
					<div class="nav_title">
						<u>
							<a class="nav_title_Text" href="javascript:show_content('3')">지난 예약 조회하기</a>
						</u>
					</div>
					<div class="nav_title">
						<u>
							<a class="nav_title_Text" href="javascript:show_content('4')">삭제된 예약 조회하기</a>
						</u>
					</div>
				</div>
				<div id=nav_02 style="display:none">
					<div class="nav_title">
					</div>
				</div>
				<div id=nav_03 style="display:none">
					<div class="nav_title">
					</div>
				</div>
				<div id=nav_04 style="display:none">
					<div class="nav_title">
					</div>
				</div>
				<div id=nav_05 style="display:none">
					<div class="nav_title">
					</div>
				</div>
			</nav>
			<aside>
				<div id=div_01>
					<div class="title">
						<a class="title_Text">예약조회</a>
						<div>
							<a class="title_Text"> - </a>
						</div>
						<div id=content_01_title>
							<a class="title_Text">전체 예약 조회하기</a>
						</div>
						<div id=content_02_title style="display:none">
							<a class="title_Text">대기 예약 조회하기</a>
						</div>
						<div id=content_03_title style="display:none">
							<a class="title_Text">지난 예약 조회하기</a>
						</div>
						<div id=content_04_title style="display:none">
							<a class="title_Text">삭제된 예약 조회하기</a>
						</div>
					</div>
					<div id=content_01>
						<div class="select_box">
							<div class="selected_box_title">
								기간 :
								시작일자 <input id="content01_start_date" type="date">
								종료일자 <input id="content01_end_date" type="date">
							</div>
							<div class="selected_box_title">
								호실 :
								<select class="roomSel" id="content01_room_id">
									<option>전체</option>
									<option>실습실/수의학관/106</option>
									<option>실습실/수의학관/107</option>
									<option>강의실/수의학관/207</option>
									<option>실습실/수의학관/216</option>
									<option>기타/수의학관/225</option>
									<option>강의실/수의학관/306</option>
									<option>강의실/수의학관/307</option>
									<option>실습실/수의학관/408</option>
									<option>강의실/수의학관/409</option>
									<option>실습실/수의학관/410</option>
									<option>세미나실/수의학관/432</option>
									<option>실습실/수의학관/509</option>
									<option>강의실/수의학관/510</option>
									<option>강의실/수의학관/511</option>
									<option>세미나실/수의학관/523</option>
									<option>강의실/동물생명과학관/710-3</option>
									<option>강의실/동물생명과학관/710-4</option>
								</select>
							</div>
							<div class="selected_box_title">
								예약 상태 :
								<select class="stateSel" id="content01_state">
									<option>전체</option>
									<option>대기중</option>
									<option>승인됨</option>
								</select>
							</div>
							<div class="selected_box_title2">
								<button id="con01resultBtn" onclick="con01checkFun()">
									<p class="btnText">조회하기</p>
									<div class="btnDisable">
										<span></span>
										<span></span>
										<span></span>
									</div>
								</button>
							</div>
							<div class="selected_box_title2">
								<button id="delBtn" onclick="con01delFun()"><p class="delText">삭제하기</p></button>
							</div>
						</div>
						<div class="table">
							<table class="table_01">
								<thead>
									<tr style="cursor:default">
										<th><input name="conSel01" type="checkbox" onclick="selectAll(this)"></th>
										<th>No. </th>
										<th>예약 상태</th>
										<th>예약 날짜</th>
										<th>시간</th>
										<th>구분</th>
										<th>건물</th>
										<th>호실</th>
										<th>신청자</th>
										<th>연락처</th>
										<th>목적</th>
										<th>담당 교수</th>
										<th>신청일자</th>
										<th>승인자</th>
										<th>승인일자</th>
									</tr>
								<tbody id="content01_tbody">
								</tbody>
							</table>
						</div>
						<script>
							function con01delFun(){
								const delCheck = confirm('선택하신 예약 정보를 삭제하시겠습니까?');
								if(delCheck){
									const my_tbody = document.getElementById('content01_tbody');
									if(my_tbody.rows.length === 0){
										alert('조회한 예약 정보가 없습니다.');
									}else{
										let i = 1;
										while(i <= my_tbody.rows.length){
											const checkIdName = 'con01Check'+i;
											if(document.getElementById(checkIdName).checked === true){
												fs.collection(fs_book).doc(con01TableData[i-1].reservDate).collection('Data').doc(con01TableData[i-1].docId).update({
													delete_date: firebase.firestore.Timestamp.fromDate(new Date()),
													deleted_from: firebase.auth().currentUser.displayName,
													use_check: false,
												}).then(snapshot => {
													
												}).catch(e =>{
													console.log("예약조회01: "+con01TableData[i-1].docId + " , " + con01TableData[i-1].reservDate);
													console.log(e.code + ": "+e.message);
												});
											}
											i++;
										}
										alert('예약 정보를 삭제했습니다');
										tableReset()
									}
								}
							};
						</script>
						<script>
							let con01TableData = [];
							function con01checkFun(){
								const start_date = document.getElementById('content01_start_date').value;
								const end_date = document.getElementById('content01_end_date').value;
								const room_id = document.getElementById('content01_room_id').value;
								const state = document.getElementById('content01_state').value;
								con01table_reset();
								if(start_date === ""){
									alert('시작 일자를 선택해주세요');
								}else if(end_date === ""){
									alert('종료 일자를 선택해주세요');
								}else if(start_date > end_date){
									alert('시작 일자가 종료 일자보다 늦습니다. 다시 선택해주세요');
								}else{
									let datelist = [];
									getDateRange(start_date, end_date, datelist);
									for(let i in datelist){
										const dday = getDay(datelist[i]);
										if(room_id === "전체"){
											if(state === "전체"){
												fs.collection(fs_book).doc(datelist[i]+" ("+dday+")").collection('Data')
												.where("use_check", "==", true).get()
												.then(snapshot => {
													con01qeuryFun(datelist[i]+" ("+dday+")", snapshot);
												}).catch(e=>{
													alert('조회하기 에러 00'+ e.code);
													console.log(e.message);
												});
											}else if(state === "대기중"){
												fs.collection(fs_book).doc(datelist[i]+" ("+dday+")").collection('Data')
												.where("use_check", "==", true).where("reserv_confirm", "==", false).get()
												.then(snapshot => {
													con01qeuryFun(datelist[i]+" ("+dday+")", snapshot);
												}).catch(e=>{
													alert('조회하기 에러 01'+ e.code);
													console.log(e.message);
												});
											}else if(state === "승인됨"){
												fs.collection(fs_book).doc(datelist[i]+" ("+dday+")").collection('Data')
												.where("use_check", "==", true).where("reserv_confirm", "==", true).get()
												.then(snapshot => {
													con01qeuryFun(datelist[i]+" ("+dday+")", snapshot);
												}).catch(e=>{
													alert('조회하기 에러 02'+ e.code);
													console.log(e.message);
												});
											}
										}else{
											if(state === "전체"){
												fs.collection(fs_book).doc(datelist[i]+" ("+dday+")").collection('Data')
												.where("use_check", "==", true).where("room_id", "==", "/"+room_id).get()
												.then(snapshot => {
													con01qeuryFun(datelist[i]+" ("+dday+")", snapshot);
												}).catch(e=>{
													alert('조회하기 에러 03'+ e.code);
													console.log(e.message);
												});
											}else if(state === "대기중"){
												fs.collection(fs_book).doc(datelist[i]+" ("+dday+")").collection('Data')
												.where("use_check", "==", true).where("reserv_confirm", "==", false).where("room_id", "==", "/"+room_id).get()
												.then(snapshot => {
													con01qeuryFun(datelist[i]+" ("+dday+")", snapshot);
												}).catch(e=>{
													alert('조회하기 에러 04'+ e.code);
													console.log(e.message);
												});
											}else if(state === "승인됨"){
												fs.collection(fs_book).doc(datelist[i]+" ("+dday+")").collection('Data')
												.where("use_check", "==", true).where("reserv_confirm", "==", true).where("room_id", "==", "/"+room_id).get()
												.then(snapshot => {
													con01qeuryFun(datelist[i]+" ("+dday+")", snapshot);
												}).catch(e=>{
													alert('조회하기 에러 05'+ e.code);
													console.log(e.message);
												});
											}
										}
									}
								}
							};
							function con01table_reset() {
								const my_tbody = document.getElementById('content01_tbody');
								while(my_tbody.rows.length > 0){
									my_tbody.deleteRow(0);
								}
								con01TableData = [];
							};
							function con01add_row(data) {
								const my_tbody = document.getElementById('content01_tbody');
								const row = my_tbody.insertRow( my_tbody.rows.length );
								const tbrowlen = my_tbody.rows.length;
								const cell0 = row.insertCell(0);	// 체크박스
								const cell1 = row.insertCell(1);	// No.
								const cell2 = row.insertCell(2);	// 예약 상태
								const cell3 = row.insertCell(3);	// 예약 날짜
								const cell4 = row.insertCell(4);	// 시간
								const cell5 = row.insertCell(5);	// 구분
								const cell6 = row.insertCell(6);	// 건물
								const cell7 = row.insertCell(7);	// 호실
								const cell8 = row.insertCell(8);	// 신청자
								const cell9 = row.insertCell(9);	// 연락처
								const cell10 = row.insertCell(10);	// 목적
								const cell11 = row.insertCell(11);	// 담당 교수
								const cell12 = row.insertCell(12);	// 신청일자
								const cell13 = row.insertCell(13);	// 승인자
								const cell14 = row.insertCell(14);	// 승인일자

								const locaArr = data.room_id.split('/');

								cell0.innerHTML = "<input id='con01Check"+ tbrowlen + "' name='conSel01' type='checkbox'>";
								cell1.innerHTML = tbrowlen;
								if(data.reserv_confirm){
									cell2.innerHTML = "승인됨";
									cell13.innerHTML = data.confirm_from;
									cell14.innerHTML = dateTypeChange(data.confirm_date);
								}else{
									cell2.innerHTML = "대기중";
									cell13.innerHTML = "";
									cell14.innerHTML = "";
								}
								cell3.innerHTML = data.reserv_date;
								cell4.innerHTML = data.start_time + " ~ " + data.end_time;
								cell5.innerHTML = locaArr[1];
								cell6.innerHTML = locaArr[2];
								cell7.innerHTML = locaArr[3];
								cell8.innerHTML = data.user_name;
								cell9.innerHTML = data.phone_number;
								cell10.innerHTML = data.purpose;
								cell11.innerHTML = data.prof_name;
								cell12.innerHTML = dateTypeChange(data.apply_date);
							}
							function con01qeuryFun(date, snapshot){
								if(snapshot.empty){
								}else{
									for(let v in snapshot.docs) {
										const doc = snapshot.docs[v];
										con01TableData.push({
											docId: doc.id,
											reservDate: date,
										});
										let resertData_tmp = {
											reserv_date: date,
											apply_date: doc.get('apply_date'),
											delete_date: doc.get('delete_date'),
											deleted_from: doc.get('deleted_from'),
											end_time: doc.get('end_time'),
											phone_number: doc.get('phone_number'),
											prof_name: doc.get('prof_name'),
											purpose: doc.get('purpose'),
											reserv_confirm: doc.get('reserv_confirm'),
											room_id: doc.get('room_id'),
											start_time: doc.get('start_time'),
											stored_from: doc.get('stored_from'),
											use_check: doc.get('use_check'),
											user_id: doc.get('user_id'),
											user_name: doc.get('user_name'),
											confirm_date: doc.get('confirm_date'),
											confirm_from: doc.get('confirm_from'),
										};
										con01add_row(resertData_tmp);
									}
								}
							};
						</script>
					</div>
					<div id=content_02 style="display:none">
						<div class="select_box">
							<div class="selected_box_title">
								기간(오늘부터) :
								시작일자 <input id="content02_start_date" type="date" onchange="con02DateOnChagne(this.id, this.value)">
								종료일자 <input id="content02_end_date" type="date" onchange="con02DateOnChagne(this.id, this.value)">
							</div>
							<div class="selected_box_title">
								호실 :
								<select class="roomSel" id="content02_room_id">
									<option>전체</option>
									<option>실습실/수의학관/106</option>
									<option>실습실/수의학관/107</option>
									<option>강의실/수의학관/207</option>
									<option>실습실/수의학관/216</option>
									<option>기타/수의학관/225</option>
									<option>강의실/수의학관/306</option>
									<option>강의실/수의학관/307</option>
									<option>실습실/수의학관/408</option>
									<option>강의실/수의학관/409</option>
									<option>실습실/수의학관/410</option>
									<option>세미나실/수의학관/432</option>
									<option>실습실/수의학관/509</option>
									<option>강의실/수의학관/510</option>
									<option>강의실/수의학관/511</option>
									<option>세미나실/수의학관/523</option>
									<option>강의실/동물생명과학관/710-3</option>
									<option>강의실/동물생명과학관/710-4</option>
								</select>
							</div>
							<div class="selected_box_title2">
								<button id="con02resultBtn" onclick="con02checkFun()">
									<p class="btnText">조회하기</p>
									<div class="btnDisable">
										<span></span>
										<span></span>
										<span></span>
									</div>
								</button>
							</div>
							<div class="selected_box_title2">
								<button id="confBtn" onclick="con02confFun()"><p class="confText">예약승인</p></button>
							</div>
						</div>
						<div class="table">
							<table class="table_01">
								<thead>
									<tr>
										<th><input name="conSel02" type="checkbox" onclick="selectAll(this)"></th>
										<th>No. </th>
										<th>예약 상태</th>
										<th>예약 날짜</th>
										<th>시간</th>
										<th>구분</th>
										<th>건물</th>
										<th>호실</th>
										<th>신청자</th>
										<th>연락처</th>
										<th>목적</th>
										<th>담당 교수</th>
										<th>신청일자</th>
									</tr>
								<tbody id="content02_tbody">
								</tbody>
							</table>
						</div>
						<script>
							function con02confFun(){
								const delCheck = confirm('선택하신 예약을 승인하시겠습니까?');
								if(delCheck){
									const my_tbody = document.getElementById('content02_tbody');
									if(my_tbody.rows.length === 0){
										alert('조회한 예약 정보가 없습니다.');
									}else{
										let i = 1;
										while(i <= my_tbody.rows.length){
											const checkIdName = 'con02Check'+i;
											if(document.getElementById(checkIdName).checked === true){
												fs.collection(fs_book).doc(con02TableData[i-1].reservDate).collection('Data').doc(con02TableData[i-1].docId).update({
													confirm_date: firebase.firestore.Timestamp.fromDate(new Date()),
													confirm_from: firebase.auth().currentUser.displayName,
													reserv_confirm: true,
												}).then(snapshot => {
													
												}).catch(e =>{
													console.log("예약조회02: "+con02TableData[i-1].docId + " , " + con02TableData[i-1].reservDate);
													console.log(e.code + ": "+e.message);
												});
											}
											i++;
										}
										alert('선택한 예약이 승인되었습니다.');
										tableReset()
									}
								}
							};
						</script>
						<script>
							let con02TableData = [];
							function con02DateOnChagne(id, value){
								let year_today = new Date().getFullYear();
								let month_today = new Date().getMonth()+1;
								if(month_today < 10){
									month_today = '0'+month_today;
								}
								let date_today = new Date().getDate();
								if(date_today < 10){
									date_today = '0'+date_today;
								}
								let today = year_today+"-"+month_today+"-"+date_today;
								if(value < today){
									alert('대기 예약은 오늘부터 선택이 가능합니다.');
									document.getElementById(id).value = today;
								}
							};
							function con02table_reset() {
								const my_tbody = document.getElementById('content02_tbody');
								while(my_tbody.rows.length > 0){
									my_tbody.deleteRow(0);
								}
								con02TableData = [];
							};
							function con02checkFun(){
								const start_date = document.getElementById('content02_start_date').value;
								const end_date = document.getElementById('content02_end_date').value;
								const room_id = document.getElementById('content02_room_id').value;

								// 오늘 날짜 가져오기
								con02table_reset();
								if(start_date === ""){
									alert('시작 일자를 선택해주세요');
								}else if(end_date === ""){
									alert('종료 일자를 선택해주세요');
								}else if(start_date > end_date){
									alert('시작 일자가 종료 일자보다 늦습니다. 다시 선택해주세요');
								}else{
									let datelist = [];
									getDateRange(start_date, end_date, datelist);
									for(let i in datelist){
										const dday = getDay(datelist[i]);
										if(room_id === "전체"){
											fs.collection(fs_book).doc(datelist[i]+" ("+dday+")").collection('Data')
											.where("use_check", "==", true).where("reserv_confirm", "==", false).get()
											.then(snapshot => {
												con02qeuryFun(datelist[i]+" ("+dday+")", snapshot);
											}).catch(e=>{
												alert('조회하기 에러 06'+ e.code);
												console.log(e.message);
											});
										}else{
											fs.collection(fs_book).doc(datelist[i]+" ("+dday+")").collection('Data')
											.where("use_check", "==", true).where("reserv_confirm", "==", false).where("room_id", "==", "/"+room_id).get()
											.then(snapshot => {
												con02qeuryFun(datelist[i]+" ("+dday+")", snapshot);
											}).catch(e=>{
												alert('조회하기 에러 07'+ e.code);
												console.log(e.message);
											});
										}
									}
								}
							};
							function con02qeuryFun(date, snapshot){
								if(snapshot.empty){
								}else{
									for(let v in snapshot.docs) {
										const doc = snapshot.docs[v];
										con02TableData.push({
											docId: doc.id,
											reservDate: date,
										});
										let resertData_tmp = {
											reserv_date: date,
											apply_date: doc.get('apply_date'),
											delete_date: doc.get('delete_date'),
											deleted_from: doc.get('deleted_from'),
											end_time: doc.get('end_time'),
											phone_number: doc.get('phone_number'),
											prof_name: doc.get('prof_name'),
											purpose: doc.get('purpose'),
											reserv_confirm: doc.get('reserv_confirm'),
											room_id: doc.get('room_id'),
											start_time: doc.get('start_time'),
											stored_from: doc.get('stored_from'),
											use_check: doc.get('use_check'),
											user_id: doc.get('user_id'),
											user_name: doc.get('user_name'),
											confirm_date: doc.get('confirm_date'),
											confirm_from: doc.get('confirm_from'),
										};
										con02add_row(resertData_tmp);
									}
								}
							};
							function con02add_row(data) {
								const my_tbody = document.getElementById('content02_tbody');
								const row = my_tbody.insertRow( my_tbody.rows.length );
								const tbrowlen = my_tbody.rows.length;
								const cell0 = row.insertCell(0);	// 체크박스
								const cell1 = row.insertCell(1);	// No.
								const cell2 = row.insertCell(2);	// 예약 상태
								const cell3 = row.insertCell(3);	// 예약 날짜
								const cell4 = row.insertCell(4);	// 시간
								const cell5 = row.insertCell(5);	// 구분
								const cell6 = row.insertCell(6);	// 건물
								const cell7 = row.insertCell(7);	// 호실
								const cell8 = row.insertCell(8);	// 신청자
								const cell9 = row.insertCell(9);	// 연락처
								const cell10 = row.insertCell(10);	// 목적
								const cell11 = row.insertCell(11);	// 담당 교수
								const cell12 = row.insertCell(12);	// 신청일자

								const locaArr = data.room_id.split('/');

								cell0.innerHTML = "<input id='con02Check"+ tbrowlen + "' name='conSel02' type='checkbox'>";
								cell1.innerHTML = tbrowlen;
								if(data.reserv_confirm){
									cell2.innerHTML = "승인됨";
								}else{
									cell2.innerHTML = "대기중";
								}
								cell3.innerHTML = data.reserv_date;
								cell4.innerHTML = data.start_time + " ~ " + data.end_time;
								cell5.innerHTML = locaArr[1];
								cell6.innerHTML = locaArr[2];
								cell7.innerHTML = locaArr[3];
								cell8.innerHTML = data.user_name;
								cell9.innerHTML = data.phone_number;
								cell10.innerHTML = data.purpose;
								cell11.innerHTML = data.prof_name;
								cell12.innerHTML = dateTypeChange(data.apply_date)
							}
						</script>
					</div>
					<div id=content_03 style="display:none">
						<div class="select_box">
							<div class="selected_box_title">
								기간(어제까지) :
								시작일자 <input id="content03_start_date" type="date" onchange="con03DateOnChagne(this.id, this.value)">
								종료일자 <input id="content03_end_date" type="date" onchange="con03DateOnChagne(this.id, this.value)">
							</div>
							<div class="selected_box_title">
								호실 :
								<select class="roomSel" id="content03_room_id">
									<option>전체</option>
									<option>실습실/수의학관/106</option>
									<option>실습실/수의학관/107</option>
									<option>강의실/수의학관/207</option>
									<option>실습실/수의학관/216</option>
									<option>기타/수의학관/225</option>
									<option>강의실/수의학관/306</option>
									<option>강의실/수의학관/307</option>
									<option>실습실/수의학관/408</option>
									<option>강의실/수의학관/409</option>
									<option>실습실/수의학관/410</option>
									<option>세미나실/수의학관/432</option>
									<option>실습실/수의학관/509</option>
									<option>강의실/수의학관/510</option>
									<option>강의실/수의학관/511</option>
									<option>세미나실/수의학관/523</option>
									<option>강의실/동물생명과학관/710-3</option>
									<option>강의실/동물생명과학관/710-4</option>
								</select>
							</div>
							<div class="selected_box_title">
								예약 상태 :
								<select class="stateSel" id="content03_state">
									<option>전체</option>
									<option>대기중</option>
									<option>승인됨</option>
								</select>
							</div>
							<div class="selected_box_title2">
								<button id="con03resultBtn" onclick="con03checkFun()">
									<p class="btnText">조회하기</p>
									<div class="btnDisable">
										<span></span>
										<span></span>
										<span></span>
									</div>
								</button>
							</div>
						</div>
						<div class="table">
							<table class="table_01">
								<thead>
									<tr>
										<th><input name="conSel03" type="checkbox" onclick="selectAll(this)"></th>
										<th>No. </th>
										<th>예약 상태</th>
										<th>예약 날짜</th>
										<th>시간</th>
										<th>구분</th>
										<th>건물</th>
										<th>호실</th>
										<th>신청자</th>
										<th>연락처</th>
										<th>목적</th>
										<th>담당 교수</th>
										<th>신청일자</th>
										<th>승인자</th>
										<th>승인일자</th>
									</tr>
								<tbody id="content03_tbody">
								</tbody>
							</table>
						</div>
						<script>
							let con03TableData = [];
							function con03checkFun(){
							}
							function con03DateOnChagne(id, value) {
								let yDate = new Date(new Date().getTime() + (1000 * 60 * 60 * 24 * -1));
								let year_yday = new Date(yDate).getFullYear();
								let month_yday = new Date(yDate).getMonth() + 1;
								if(month_yday < 10){
									month_yday = '0'+month_yday;
								}
								let date_yday = new Date(yDate).getDate();
								if(date_yday < 10){
									date_yday = '0'+date_yday;
								}
								let yday = year_yday+"-"+month_yday+"-"+date_yday;
								if(value > yday){
									alert('지난 예약은 어제날짜 까지만 선택이 가능합니다.');
									document.getElementById(id).value = yday;
								}
							};
							function con03table_reset() {
								const my_tbody = document.getElementById('content03_tbody');
								while(my_tbody.rows.length > 0){
									my_tbody.deleteRow(0);
								}
								con03TableData = [];
							};
						</script>
					</div>
					<div id=content_04 style="display:none">
						<div class="select_box">
							<div class="selected_box_title">
								기간(오늘까지) :
								시작일자 <input id="content04_start_date" type="date">
								종료일자 <input id="content04_end_date" type="date">
							</div>
							<div class="selected_box_title">
								호실 :
								<select class="roomSel" id="content04_room_id">
									<option>선택</option>
									<option>실습실/수의학관/106</option>
									<option>실습실/수의학관/107</option>
									<option>강의실/수의학관/207</option>
									<option>실습실/수의학관/216</option>
									<option>기타/수의학관/225</option>
									<option>강의실/수의학관/306</option>
									<option>강의실/수의학관/307</option>
									<option>실습실/수의학관/408</option>
									<option>강의실/수의학관/409</option>
									<option>실습실/수의학관/410</option>
									<option>세미나실/수의학관/432</option>
									<option>실습실/수의학관/509</option>
									<option>강의실/수의학관/510</option>
									<option>강의실/수의학관/511</option>
									<option>세미나실/수의학관/523</option>
									<option>강의실/동물생명과학관/710-3</option>
									<option>강의실/동물생명과학관/710-4</option>
								</select>
							</div>
							<div class="selected_box_title2">
								<button id="con04resultBtn" onclick="con04checkFun()">
									<p class="btnText">조회하기</p>
									<div class="btnDisable">
										<span></span>
										<span></span>
										<span></span>
									</div>
								</button>
							</div>
						</div>
						<div class="table">
							<table class="table_01">
								<thead>
									<tr>
										<th><input name="sel_04" type="checkbox" onclick="selectAll(this)"></th>
										<th>No. </th>
										<th>예약 상태</th>
										<th>예약 날짜</th>
										<th>시간</th>
										<th>구분</th>
										<th>건물</th>
										<th>호실</th>
										<th>신청자</th>
										<th>연락처</th>
										<th>목적</th>
										<th>담당 교수</th>
										<th>신청일자</th>
										<th>승인자</th>
										<th>승인일자</th>
										<th>삭제자</th>
										<th>삭제일자</th>
									</tr>
								<tbody id="content04_tbody">
								</tbody>
							</table>
						</div>
						<script>
							let con04TableData = [];
							function con04checkFun(){

							}
							function con04table_reset() {
								const my_tbody = document.getElementById('content04_tbody');
								while(my_tbody.rows.length > 0){
									my_tbody.deleteRow(0);
								}
								con04TableData = [];
							};
						</script>
					</div>
					<script>
						function dateTypeChange(date){
							// 경고 ! firebase 의 timestamp 형식으로 되어 있는 데이터만 변경이 가능
							const fsDate = date.seconds*1000;
							let month_tmp = new Date(fsDate).getMonth()+1;
							if(month_tmp < 10){
								month_tmp = '0'+month_tmp;
							}
							let date_tmp = new Date(fsDate).getDate();
							if(date_tmp < 10){
								date_tmp = '0'+date_tmp;
							}
							let hour_tmp = new Date(fsDate).getHours();
							if(hour_tmp < 10){
								hour_tmp = '0'+hour_tmp;
							}
							let min_tmp = new Date(fsDate).getMinutes();
							if(min_tmp < 10){
								min_tmp = '0'+min_tmp;
							}
							let sec_tmp = new Date(fsDate).getSeconds();
							if(sec_tmp < 10){
								sec_tmp = '0'+sec_tmp;
							}
							let resultDate= new Date(fsDate).getFullYear()+"-"+month_tmp+"-"+date_tmp
							+" "+hour_tmp+":"+min_tmp+":"+sec_tmp;
							return resultDate;
						}
						function getDateRange(startDate, endDate, listDate) {
							var dateMove = new Date(startDate);
							var strDate = startDate;
							if (startDate == endDate) {
								var strDate = dateMove.toISOString().slice(0, 10);
								listDate.push(strDate);
							}else {
								while (strDate < endDate) {
									var strDate = dateMove.toISOString().slice(0, 10);
									listDate.push(strDate);
									dateMove.setDate(dateMove.getDate() + 1);
								}
							}
							return listDate;
						};
						var btn01 = document.querySelector("#con01resultBtn");
						var btn02 = document.querySelector("#con02resultBtn");
						var btn03 = document.querySelector("#con03resultBtn");
						var btn04 = document.querySelector("#con04resultBtn");
						btn01.addEventListener("click", function (e) {
							var vm = this;
							this.setAttribute("disabled", "disabled");

							setTimeout(function () {
								vm.removeAttribute("disabled")
							}, 500);
						});
						btn02.addEventListener("click", function (e) {
							var vm = this;
							this.setAttribute("disabled", "disabled");

							setTimeout(function () {
								vm.removeAttribute("disabled")
							}, 500);
						});
						btn03.addEventListener("click", function (e) {
							var vm = this;
							this.setAttribute("disabled", "disabled");

							setTimeout(function () {
								vm.removeAttribute("disabled")
							}, 500);
						});
						btn04.addEventListener("click", function (e) {
							var vm = this;
							this.setAttribute("disabled", "disabled");

							setTimeout(function () {
								vm.removeAttribute("disabled")
							}, 500);
						});
					</script>
				</div>
				<div id=div_02 style="display:none">
					<div class="title">
						<a class="title_Text">예약하기</a>
					</div>
					<div class=content_00>
						<div id="reserv_box">
							<div class="reserv_content_box2">
							</div>
							<div id="reserv_content_box">
								<div class="reserv_content">
								</div>
								<div title="예약 날짜" class="reserv_content">
									예약 날짜 :
									<input id="reserv_date" type="date">
								</div>
								<div title="시작 시간 08:00~22:00" class="reserv_content">
									시작 시간 :
									<select id="start_time_min">
										<option>분</option>
										<option>00</option>
										<option>30</option>
									</select>
									<select id="start_time_hour">
										<option>시</option>
										<option>08</option>
										<option>09</option>
										<option>10</option>
										<option>11</option>
										<option>12</option>
										<option>13</option>
										<option>14</option>
										<option>15</option>
										<option>16</option>
										<option>17</option>
										<option>18</option>
										<option>19</option>
										<option>20</option>
										<option>21</option>
									</select>
								</div>
								<div title="종료 시간 08:00~22:00" class="reserv_content">
									종료 시간 :
									<select id="end_time_min">
										<option>분</option>
										<option>00</option>
										<option>30</option>
									</select>
									<select id="end_time_hour">
										<option>시</option>
										<option>08</option>
										<option>09</option>
										<option>10</option>
										<option>11</option>
										<option>12</option>
										<option>13</option>
										<option>14</option>
										<option>15</option>
										<option>16</option>
										<option>17</option>
										<option>18</option>
										<option>19</option>
										<option>20</option>
										<option>21</option>
										<option>22</option>
									</select>
								</div>
								<div title="구분/건물/호실" class="reserv_content">
									구분 / 건물 / 호실 :
									<select id="room_id">
										<option>선택</option>
										<option>실습실/수의학관/106</option>
										<option>실습실/수의학관/107</option>
										<option>강의실/수의학관/207</option>
										<option>실습실/수의학관/216</option>
										<option>기타/수의학관/225</option>
										<option>강의실/수의학관/306</option>
										<option>강의실/수의학관/307</option>
										<option>실습실/수의학관/408</option>
										<option>강의실/수의학관/409</option>
										<option>실습실/수의학관/410</option>
										<option>세미나실/수의학관/432</option>
										<option>실습실/수의학관/509</option>
										<option>강의실/수의학관/510</option>
										<option>강의실/수의학관/511</option>
										<option>세미나실/수의학관/523</option>
										<option>강의실/동물생명과학관/710-3</option>
										<option>강의실/동물생명과학관/710-4</option>
									</select>
								</div>
								<div title="신청자는 10자 이하로 입력해주세요" class="reserv_content">
									신청자 :
									<input id="user_name" type="text">
								</div>
								<div title="전화번호 11자리 ex)01012341234" class="reserv_content">
									연락처 :
									<input id="phone_number" type="text">
								</div>
								<div title="목적 ex)강의, 세미나, 간담회, 연구보고, 행사 등 " class="reserv_content">
									목적 :
									<input id="purpose" type="text">
								</div>
								<div title="담당 교수" class="reserv_content">
									담당 교수 :
									<input id="prof_name" type="text">
								</div>
								<div class="reserv_content">
								</div>
								<div class="reserv_content">
									<button onclick="reservConfirmBefore()">예약하기</button>
								</div>
							</div>
							<div class="reserv_content_box2">
							</div>
						</div>
					</div>
					<script>
						function reservConfirmBefore() {
							const reservConfirmValue = confirm('예약을 하시겠습니까?');
							if(reservConfirmValue){
								reservConfirm();
							}
						}
						function reservConfirm() {
							const apply_date = firebase.firestore.Timestamp.fromDate(new Date());
							const reserv_date = document.getElementById('reserv_date').value;
							const dday = getDay(reserv_date);
							const st_hour = document.getElementById('start_time_hour').value;
							const st_min = document.getElementById('start_time_min').value;
							const et_hour = document.getElementById('end_time_hour').value;
							const et_min = document.getElementById('end_time_min').value;
							const room_id = document.getElementById('room_id').value;
							const user_name = document.getElementById('user_name').value.trim();
							const phone_number = document.getElementById('phone_number').value.trim();
							const purpose = document.getElementById('purpose').value;
							const prof_name = document.getElementById('prof_name').value.trim();
							if (reserv_date === "") {
								alert('예약 날짜를 입력해주세요');
							} else if (st_hour === "시" || st_min === "분") {
								alert('시작 시간을 입력해주세요');
							} else if (et_hour === "시" || et_min === "분") {
								alert('종료 시간을 입력해주세요');
							} else if (et_hour === "22" && et_min === "30") {
								alert('종료 시간은 22시까지만 가능합니다.');
							} else if ((Number(st_hour) * 100 + Number(st_min)) >= (Number(et_hour) * 100 + Number(et_min))) {
								alert('시작 시간이 종료 시간보다 빠르거나 같습니다');
							} else if (room_id === "선택") {
								alert('구분/건물/호실 을 입력해주세요');
							} else if (user_name === "") {
								alert('신청자를 입력해주세요');
							} else if (user_name.length > 10) {
								alert('신청자의 길이가 너무 깁니다. 10자 이하로 넣어주세요');
							} else if (phone_number === "") {
								alert('전화번호를 입력해주세요');
							} else if (phone_number.length > 20) {
								alert('전화번호의 길이가 너무 깁니다.');
							} else if (purpose === "") {
								alert('목적을 입력해주세요');
							} else if (purpose.length > 10) {
								alert('목적의 길이가 너무 깁니다.');
							} else if (prof_name === "") {
								alert('담당교수를 입력해주세요');
							} else if (prof_name.length > 10) {
								alert('담당교수의 길이가 너무 깁니다.');
							} else {
								const stnum = (Number(st_hour) * 100 + Number(st_min));
								const etnum = (Number(et_hour) * 100 + Number(et_min));
								let returnValue = true;
								fs.collection(fs_book).doc(reserv_date + " (" + dday + ")").collection('Data')
									.where("room_id", "==", "/" + room_id).where("use_check", "==", true).get()
									.then(querySnapshot => {
										if (querySnapshot.empty) {
										} else {
											for(let i in querySnapshot.docs) {
												const doc = querySnapshot.docs[i];
												const s_time = doc.get('start_time');
												const e_time = doc.get('end_time');
												const startnum = (Number(s_time.substr(0, 2))) * 100 + (Number(s_time.substr(3)));
												const endnum = (Number(e_time.substr(0, 2))) * 100 + (Number(e_time.substr(3)));
												if (stnum > startnum){
													if(stnum < endnum){
														returnValue = false;
														break;
													}
												}else{
													if(startnum < etnum){
														returnValue = false;
														break;
													}
												}
											}
										}
										if(returnValue){
											fs.collection(fs_book).doc(reserv_date + " (" + dday + ")").collection('Data').add({
												apply_date: apply_date,
												start_time: st_hour+":"+st_min,
												end_time: et_hour+":"+et_min,
												prof_name: prof_name,
												purpose: purpose,
												reserv_confirm: false,
												use_check: true,
												room_id: "/" + room_id ,
												stored_from: 1,
												user_id: firebase.auth().currentUser.uid,
												user_name: user_name,
												phone_number: phone_number,
											}).then(()=>{
												alert('예약이 성공하였습니다.');
											}).catch(e=>{
												alert('예약하기 error',e.code);
												console.log(e.code);
												console.log(e.message);
											});
										}else{
											alert('중복되는 예약이 있습니다.');
										}
									}).catch(e => {
										alert("error" + e.code);
										console.log(e.code);
										console.log(e.message);
										returnValue = false;
										return returnValue;
									});
							}
						}
						function getDay(date) {
							const week = ['일', '월', '화', '수', '목', '금', '토'];
							const dayOfWeek = week[new Date(date).getDay()];
							return dayOfWeek;
						}
					</script>
				</div>
				<div id=div_03 style="display:none">
					<div class="title">
						<a class="title_Text">대량등록</a>
					</div>
					<div class=content_00>
						<div class="select_box">
							<div class="selected_box_title">
								기간 :
								시작일자 <input type="date">
								종료일자 <input type="date">
							</div>
							<div class="selected_box_title">
								목적 :
								<input type="text">
							</div>
							<div class="selected_box_title2">
								<button onclick=""><p class="btnText">데이터 넣기</p></button>
							</div>
							<div id="selected_box_title3">
								<input type="file" name="file_name" accept=".xls,.xlsx">
							</div>
						</div>
						<div class="table">
							<table class="table_01">
								<thead>
									<tr style="cursor:default">
										<th><input name="sel_05" type="checkbox" onclick="selectAll(this)"></th>
										<th>No. </th>
										<th>수업명</th>
										<th>예약 요일</th>
										<th>시간</th>
										<th>구분</th>
										<th>건물</th>
										<th>호실</th>
										<th>담당 교수</th>
										<th>성공여부</th>
									</tr>
								<tbody id="div03_tbody">
								</tbody>
							</table>
						</div>
					</div>
					<script>
						let div03TableData = [];
						function div03table_reset() {
							const my_tbody = document.getElementById('div03_tbody');
							while(my_tbody.rows.length > 0){
								my_tbody.deleteRow(0);
							}
							div03TableData = [];
						};
					</script>
				</div>
				<div id=div_04 style="display:none">
					<div class="title">
						<a class="title_Text">다운로드</a>
					</div>
					<div class=content_00>
						<div class="download_box">
						</div>
						<div class="download_box">
							<a href="">
								예약 조회 엑셀 다운로드
							</a>
						</div>
						<div class="download_box">
							<a
								href="https://firebasestorage.googleapis.com/v0/b/konkuk-vet-space.appspot.com/o/%E1%84%8C%E1%85%A9%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%A1%E1%86%BC%E1%84%8B%E1%85%B4%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%AB%E1%84%91%E1%85%AD%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%92%E1%85%AA%E1%86%AB_%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB.xlsx?alt=media&token=c45e8466-a149-42f9-91e7-5db33f9202d0">
								대량등록 엑셀 다운로드
							</a>
						</div>
					</div>
				</div>
				<div id=div_05 style="display:none">
					<div class="title">
						<a class="title_Text">노션링크</a>
					</div>
					<div class=content_00>
						<div class="download_box">
						</div>
						<div class="download_box">
							<a href="https://www.notion.so/4d789110f3d640c3983f3cb7928bdd13?v=de228f3f9b344c1b827f95e61c143057">
								공지사항
							</a>
						</div>
						<div class="download_box">
							<a href="https://www.notion.so/ed6219e087594a1185f20e60b0be970b?v=01c2e2a7c68c493f9f5322b4a5eaa236">
								자주 묻는 질문
							</a>
						</div>
						<div class="download_box">
							<a href="https://www.notion.so/cdb971a22fa64b299d04d12048b0e20e">
								도움말
							</a>
						</div>
					</div>
				</div>
				<script>
					function tableReset(){
						con01table_reset();
						con02table_reset();
						con03table_reset();
						con04table_reset();
						div03table_reset();
						// 대량 등록 테이블도 리셋
					};
				</script>
			</aside>
		</div>
		<div class="modal-wrapper">
			<div class="modal-box">
				<div id="explain_01">
					<br>
					<div class="modal-close-box">
						<button onclick="closeButton()" class="modal-close-btn">닫기</button>
					</div>
					<h2 class="modal-title">도움말 - 예약조회 - 전체 예약 조회하기</h3>
						<br>
						<br>
						<p class="modal-content">전체 예약 조회하기는 등록되어 있는 모든 예약을 조회할 수 있습니다.</p>
						<br>
						<p class="modal-content">(단, 삭제된 데이터는 조회되지 않습니다.)</p>
						<br>
						<p class="modal-content">시작일자, 종료일자는 모든 기간 선택이 가능합니다. </p>
						<br>
						<p class="modal-content">(단, 시작일자가 종료일자보다 빠를때만 가능, 기간은 반드시 설정필요)</p>
						<br>
						<p class="modal-content">호실은 선택하지 않으면 전체 호실의 예약 정보를 확인할 수 있습니다.</p>
						<br>
						<p class="modal-content">조회하기 버튼을 눌러 원하는 조건의 예약을 조회할 수 있습니다.</p>
						<br>
						<p class="modal-content">테이블 헤더의 체크박스를 선택하면 전체 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">테이블 전체영역을 복사 붙혀넣기를 통해 엑셀에 붙혀넣을 수 있습니다.</p>
						<br>
				</div>
				<div id="explain_02" style="display:none">
					<br>
					<div class="modal-close-box">
						<button onclick="closeButton()" class="modal-close-btn">닫기</button>
					</div>
					<h2 class="modal-title">도움말 - 예약조회 - 대기 예약 조회하기</h3>
						<br>
						<br>
						<p class="modal-content">대기 예약 조회히기는 오늘 이후의 모든 대기중인 예약을 조회할 수 있습니다.</p>
						<br>
						<p class="modal-content">(단, 삭제된 데이터는 조회되지 않습니다.)</p>
						<br>
						<p class="modal-content">시작일자, 종료일자는 오늘 일자부터 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">(단, 시작일자가 종료일자보다 빠를때만 가능, 기간은 반드시 설정필요)</p>
						<br>
						<p class="modal-content">호실은 선택하지 않으면 전체 호실의 예약 정보를 확인할 수 있습니다.</p>
						<br>
						<p class="modal-content">원하는 조건을 선택하여 조회하기 버튼을 눌러 대기중인 예약을 조회할 수 있습니다.</p>
						<br>
						<p class="modal-content">좌측의 선택 박스에 원하는 예약을 선택후 예약거절 또는 예약승인 </p>
						<br>
						<p class="modal-content">버튼을 눌러 예약 상태를 변경할 수 있습니다.</p>
						<br>
						<p class="modal-content">테이블 헤더의 체크박스를 선택하면 전체 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">테이블 전체영역을 복사 붙혀넣기를 통해 엑셀에 붙혀넣을 수 있습니다.</p>
						<br>
				</div>
				<div id="explain_03" style="display:none">
					<br>
					<div class="modal-close-box">
						<button onclick="closeButton()" class="modal-close-btn">닫기</button>
					</div>
					<h2 class="modal-title">도움말 - 예약조회 - 지난 예약 조회하기</h3>
						<br>
						<br>
						<p class="modal-content">지난 예약 조회히기는 오늘 이전의 모든 예약을 조회할 수 있습니다.</p>
						<br>
						<p class="modal-content">(단, 삭제된 데이터는 조회되지 않습니다.)</p>
						<br>
						<p class="modal-content">시작일자, 종료일자는 어제 일자까지 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">(단, 시작일자가 종료일자보다 빠를때만 가능, 기간은 반드시 설정필요)</p>
						<br>
						<p class="modal-content">호실은 선택하지 않으면 전체 호실의 예약 정보를 확인할 수 있습니다.</p>
						<br>
						<p class="modal-content">원하는 조건을 선택하여 조회하기 버튼을 눌러 지난 예약을 조회할 수 있습니다.</p>
						<br>
						<p class="modal-content">테이블 헤더의 체크박스를 선택하면 전체 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">테이블 전체영역을 복사 붙혀넣기를 통해 엑셀에 붙혀넣을 수 있습니다.</p>
						<br>
				</div>
				<div id="explain_04" style="display:none">
					<br>
					<div class="modal-close-box">
						<button onclick="closeButton()" class="modal-close-btn">닫기</button>
					</div>
					<h2 class="modal-title">도움말 - 예약조회 - 삭제된 예약 조회하기</h3>
						<br>
						<br>
						<p class="modal-content">삭제된 예약 조회히기는 모든 삭제된 예약을 조회할 수 있습니다.</p>
						<br>
						<p class="modal-content">시작일자, 종료일자는 모든 기간 선택이 가능합니다. </p>
						<br>
						<p class="modal-content">(단, 시작일자가 종료일자보다 빠를때만 가능, 기간은 반드시 설정필요)</p>
						<br>
						<p class="modal-content">호실은 선택하지 않으면 전체 호실의 예약 정보를 확인할 수 있습니다.</p>
						<br>
						<p class="modal-content">원하는 조건을 선택하여 조회하기 버튼을 눌러 삭제된 예약을 조회할 수 있습니다.</p>
						<br>
						<p class="modal-content">테이블 헤더의 체크박스를 선택하면 전체 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">테이블 전체영역을 복사 붙혀넣기를 통해 엑셀에 붙혀넣을 수 있습니다.</p>
						<br>
				</div>
				<div id="explain_05" style="display:none">
					<br>
					<div class="modal-close-box">
						<button onclick="closeButton()" class="modal-close-btn">닫기</button>
					</div>
					<h2 class="modal-title">도움말 - 예약하기</h3>
						<br>
						<br>
						<p class="modal-content">예약하기는 새로운 예약을 생성할 수 있습니다.</p>
						<br>
						<p class="modal-content">(단, 중복되는 날짜, 시간, 호실에 예약이 있으면 예약이 불가능합니다.)</p>
						<br>
						<p class="modal-content">예약 날짜는 오늘 날짜 이후부터 가능합니다.</p>
						<br>
						<p class="modal-content">시작 시간과 종료 시간은 30분 단위이며, 08:00 부터 22:00 까지 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">(단, 시작 시간은 종료 시간보다 빠를때만 가능)</p>
						<br>
						<p class="modal-content">구분/건물/호실 은 선택사항에 있는 것만 사용이 가능합니다.</p>
						<br>
						<p class="modal-content">신청자는 10자 이하입니다. 원하는 정보를 입력할 수 있습니다.</p>
						<br>
						<p class="modal-content">연락처는 숫자 11자리 입니다.</p>
						<br>
						<p class="modal-content">목적은 10자 이내 간단한 설명을 넣어주세요. ex)강의, 행사, 간담회 등 </p>
						<br>
						<p class="modal-content">담당교수는 10자 이하입니다. 원하는 정보를 입력할 수 있습니다.</p>
						<br>
						<p class="modal-content">예약하기 버튼을 눌렀을 때 오류를 출력하면 예약이 정상적으로 처리되지 않습니다.</p>
						<br>
						<p class="modal-content">예약하기 버튼을 눌렀을 때 예약 완료를 출력하면 예약이 정상적으로 처리됩니다.</p>
						<br>
				</div>
				<div id="explain_06" style="display:none">
					<br>
					<div class="modal-close-box">
						<button onclick="closeButton()" class="modal-close-btn">닫기</button>
					</div>
					<h2 class="modal-title">도움말 - 대량등록</h3>
						<br>
						<br>
						<p class="modal-content">대량등록는 종합강의실시간표를 등록하거나, 여러 예약을 한번에 등록할 수 있습니다.</p>
						<br>
						<p class="modal-content">시작일자, 종료일자는 오늘 이후 날짜를 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">(단, 시작일자가 종료일자보다 빠를때만 가능, 기간은 반드시 설정필요)</p>
						<br>
						<p class="modal-content">선택된 기간동안 매주 해당 요일에 예약을 생성합니다. 목적은 예약에 원하는</p>
						<br>
						<p class="modal-content">목적을 입력할 수 있습니다. 파일 선택을 통해서 올바른 엑셀 파일을 선택하면 자동으로 </p>
						<br>
						<p class="modal-content">예약이 입력됩니다. 좌측의 선택 박스에 원하는 예약을 선택 후 데이터 넣기 버튼을 </p>
						<br>
						<p class="modal-content">누르면 해당 예약 데이터를 입력합니다. 테이블 우측의 성공여부에 성공 실패 여부를 </p>
						<br>
						<p class="modal-content">확인할 수 있습니다. 테이블 헤더의 체크박스를 선택하면 전체 선택이 가능합니다.</p>
						<br>
						<p class="modal-content">테이블 전체영역을 복사 붙혀넣기를 통해 엑셀에 붙혀넣을 수 있습니다.</p>
						<br>
						<p class="modal-content">수업명은 산총자 대신에 입력되어 어플에서 가장 우선적으로 확인할 수 있도록 </p>
						<br>
						<p class="modal-content">되어있으며, 관리자 웹 페이지를 제외하고 일반적으로 어플에서 생성되는</p>
						<br>
						<p class="modal-content">데이터는 신청자 이름이 들어갑니다.</p>
						<br>
				</div>
				<div id="explain_07" style="display:none">
					<br>
					<div class="modal-close-box">
						<button onclick="closeButton()" class="modal-close-btn">닫기</button>
					</div>
					<h2 class="modal-title">도움말 - 다운로드</h3>
						<br>
						<br>
						<p class="modal-content">다운로드는 예약조회에서 생성되는 데이터를 복사 붙혀넣기할 수 있는 엑셀 </p>
						<br>
						<p class="modal-content">파일과 대량등록에서 사용되는 올바른 엑셀 파일을 다운로드 할 수 있습니다.</p>
						<br>
				</div>
				<div id="explain_08" style="display:none">
					<br>
					<div class="modal-close-box">
						<button onclick="closeButton()" class="modal-close-btn">닫기</button>
					</div>
					<h2 class="modal-title">도움말 - 노션링크</h3>
						<br>
						<br>
						<p class="modal-content">노션링크는 어플 메뉴의 공지사항, 자주 묻는 질문, 도움말에 연결되는 </p>
						<br>
						<p class="modal-content">노션 링크입니다.</p>
						<br>
				</div>
			</div>
		</div>
		<script>
			const modalOpenBtn = document.getElementById("explain");
			const modalWrapper = document.querySelector(".modal-wrapper");
			const modalBox = document.querySelector(".modal-box");

			modalOpenBtn.addEventListener("click", () => {
				modalWrapper.style.display = "flex";
			});

			modalWrapper.addEventListener("click", e => {
				//modalWrapper.style.display = "none";
			});

			modalBox.addEventListener("click", e => {
			});
			window.addEventListener("keyup", e => {
				if (modalWrapper.style.display === "flex" && e.key === "Escape") {
					modalWrapper.style.display = "none";
				}
			});
			function closeButton() {
				modalWrapper.style.display = "none";
			}
		</script>
	</div>
	<script>
		const loginDiv = document.getElementById("login_div");
		window.addEventListener("keyup", e => {
			if (loginDiv.style.display === "block" && e.key === "Enter") {
				login();
			}
		});

		firebase.auth().onAuthStateChanged(function (user) {
			if (user) {
				// User is signed in.
				fs.collection(fs_user).doc(user.uid).get().then((doc) => {
					if (doc.exists) {
						if (doc.data().user_type === "관리자") {
							document.getElementById("user_div").style.display = "block";
							document.getElementById("login_div").style.display = "none";

							var user = firebase.auth().currentUser;

							if (user != null) {
								const display_name = firebase.auth().currentUser.displayName;
								document.getElementById('display_name').innerHTML = display_name;
								alert('로그인 성공');
							}
						} else {
							alert('접근 권한이 없습니다.');
							logout();
						}
					} else {
						console.log('no Data');
					}
				}).catch((error) => {
					console.log('firestore error', error);
				})
			} else {
				// No user is signed in.
				document.getElementById("user_div").style.display = "none";
				document.getElementById("login_div").style.display = "block";
			}
		});

		function login() {
			var userEmail = document.getElementById("idInput").value;
			var userPass = document.getElementById("pwInput").value;
			if (userEmail.trim() === "") {
				alert('이메일을 입력하세요');
			} else if (userPass.trim() === "") {
				alert('비밀번호를 입력하세요');
			} else {
				firebase.auth().signInWithEmailAndPassword(userEmail, userPass)
					.then(() => {

					}).catch(function (error) {
						// Handle Errors here.
						var errorCode = error.code;
						var errorMessage = error.message;
						if (errorCode === "auth/wrong-password") {
							window.alert("이메일이나 비밀번호가 틀립니다.");
						} else if (errorCode === "auth/user-not-found") {
							window.alert("이메일이나 비밀번호가 틀립니다.");
						} else {
							window.alert("Error : " + errorCode + " " + errorMessage);
						}
					});
			}
		}

		function logout() {
			firebase.auth().signOut().then(() => {
				alert('로그아웃 되었습니다');
			});
		}
	</script>
</body>

</html>
