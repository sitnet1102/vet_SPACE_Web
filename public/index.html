<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-firestore.js"></script>
    <style>
      *{
          margin: 0px;
          padding: 0px;
          font-family:sans-serif;
      }

      .main-div {
          width: 100%;
          height: 100%;
          background-color: rgb(0, 83, 42);
      }

      .main-div h1 {
          text-align: center;
          margin: 10px;
          color: white;
      }

      .main-div h2 {
          text-align: center;
          margin: 20px;
          color: white;
      }

      #blank {
          width: 40px;
          height:160px;
      }
      #blank2 {
          width: 40px;
          height:691px;
      }

      .loginForm {
          position:absolute;
          width:300px;
          height:350px;
          padding: 30px, 20px;
          /*background-color:#FFFFFF;*/
          background-color:#FFFFFF;
          text-align:center;
          top:50%;
          left:50%;
          transform: translate(-50%,-50%);
          border-radius: 15px;
      }


      .loginForm h2{
          text-align: center;
          margin: 30px;
          color:  black;
      }

      .idForm{
          border-bottom: 2px solid #adadad;
          margin: 30px;
          padding: 10px 10px;
      }

      .passForm{
          border-bottom: 2px solid #adadad;
          margin: 30px;
          padding: 10px 10px;
      }

      .id {
          width: 100%;
          border:none;
          outline:none;
          color: #636e72;
          font-size:16px;
          height:25px;
          background: none;
      }

      .pw {
          width: 100%;
          border:none;
          outline:none;
          color: #636e72;
          font-size:16px;
          height:25px;
          background: none;
      }

      .btn {
          position:relative;
          left:40%;
          transform: translateX(-50%);
          margin-bottom: 20px;
          width:80%;
          height:40px;
          background: linear-gradient(125deg,rgb(3,107,63),rgb(176,205,166),rgb(3,107,63));
          background-position: left;
          background-size: 200%;
          color:white;
          font-weight: bold;
          border:none;
          cursor:pointer;
          transition: 0.4s;
          display:inline;
      }
      #pw_reset {
          text-decoration: underline;
          font-size: 14px;
      }

      /*
      rgb(240,167,4)
      */

      .btn:hover {
          background-position: right;
      }

      .bottomText {
          text-align: center;
      }
      
      .pw_modal-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }

      .pw_modal-box {
          background: white;
          width: 400px;
          height: 200px;
          border-radius: 10px;
      }
      .pw_modal-title{
          text-align: center;
      }
      .pw_modal-content {
        margin-left: 50px;
      }
      .pw_modal-btn-box {
        text-align: center;
      }
      #pw_tmp {
        text-align: center;
        margin-left: 20px;
        margin-right: 20px;
        width: 360px;
        height: 40px;
      }
      #pw_modal-confirm-btn, #pw_modal-close-btn {
        /*padding: 5px 20px;*/
        width: 100px;
        height: 30px;
        margin-left: 10px;
        margin-right: 10px;
      }





      /* main Style*/
        * {
            margin:0;
            padding:0;
            color:#000;
            box-sizing: border-box;
        }

        .fn-font {
            font-family: 'Noto Sans KR', sans-serif;
        }

        ul {
            list-style: none;
        }

        a {
            outline: none;
        }

        .container {
            width:1400px;
            margin:0 auto;
        }
        header, section, nav, aside, #title {
            border-bottom: 1px solid rgb(0, 83, 42);
            border-top: 1px solid rgb(0, 83, 42);
        }
        header {
            height:40px;
            background-color:rgb(0, 83, 42);
            justify-content: center;
            align-content: center;
        }

        #item, #divor, #help, #display_name {
            text-align: center;
            color: white;
            position: relative;
            top: 25%;
            float: right;
        }
        #display_name {
          margin-right: 10px;
        }

        #help {
            float: left;
        }
        #help a {
            color: white;
        }

        #item {
            margin-right: 10px;
            margin-left: 10px;
        }

        section {
            height: 80px;
            background-color:white;
            display: flex;
            align-items:flex-start;
        }
        nav {
            float: left;
            height: 848px;
            width: 190px;
            background-color: rgb(110, 120, 139);
        }
        #nav_title {
            text-align: center;
            width: 100%;
            height: 60px;
            display: flex;
            align-items: center;
            color: white;
        }
        #nav_title_Text {
            font-size: 18px;
            margin-left: 20px;
            color: white;
        }
        #explain {
            color: white;
            width: 100px;
            height: 20px;
            float: left;
        }
        #explain_01, #explain_02, #explain_03, #explain_04, #explain_05, #explain_06, #explain_07{
        }
        #blank_box {
            height: 10px;
            width: 100%;
        }
        #blank_box2 {
            height: 60px;
            width: 200px;
        }
        section ul {
            width: 100%;
            height: 100%;
            display: flex;
        }
        section ul li  {
            height: 100%;
            display: flex;
            align-items: center;
        }
        section ul li img {
            margin: 10px;
        }
        #item2 {
            margin-top: 5px;
            margin-left: 30px;
            font-size: 28px;
        }
        #section_blank {
            width: 250px;
            height: 100%;
        }
        aside {
            float: left;
            background-color:white;
            width:1210px;
            height: 848px;
        }

        #logout {
            color: white;
            background-color: rgb(0, 83, 42);
        }
        #title {
            width: 100%;
            height: 60px;
            background-color:rgb(236,235,227);
            display: flex;
            align-items: center;
        }
        #title_Text {
            font-size: 28px;
            margin-left: 20px;
        }

        #div_01, #div_02, #div_03 {
            width: 100%;
            height: 100%;
        }

        #content_00, #content_01, #content_02, #content_03, #content_04 {
            width: 100%;
            height: 718px;
        }
        #select_box {
            margin-left: 1%;
            width: 98%;
            height: 60px;
            border-bottom: 1px solid rgb(0, 83, 42);
        }
        #selected_box_title{
            float: left;
            margin-left: 20px;
            position: relative;
            top: 35%;
            font-size: 16px;
        }
        #selected_box_title input, #selected_box_title select {
            width: 160px;
            height: 24px;
            font-size: 16px;
        }
        #selected_box_title2{
            float: right;
            margin-left: 20px;
            position: relative;
            top: 35%;
            width: 8%;
        }
        #selected_box_title3{
            float: right;
            margin-left: 20px;
            position: relative;
            top: 35%;
            width: 20%;
            border: 1px solid rgb(0, 83, 42);
        } 
        #selected_box_title2 button {
            width: 80px;
            height: 24px;
            font-size: 16px;
        }
        #table {
            width: 1200px;
            height: 708px;
            margin: 10px;
            border: 2px solid rgb(0, 83, 42);
            font-size: 12px;
            overflow-x:scroll;
            overflow-y:scroll;
        }
        #table_01 {
            border-top: none;
            border-bottom: 1px solid rgb(0, 83, 42);
            border-right: none;
            border-left: none;
            border-collapse: separate;
            border-spacing: 1px;
            text-align: center;
            line-height: 1.5;
        }
        #table_01 th {
            width: 300px;
            height: 20px;
            border-bottom: 1px solid rgb(0, 83, 42);
            font-weight: bold;
            position: sticky;
            top: 0px;
            background-color: white;
        }
        #table_01 td {
            width: 300px;
            height: 20px;
            background: #eee;
            justify-items: center;
        }
        #dynamicTbody {
            
        }
        #reserv_box {
            width: 810px;
            height: 628px;
            margin-left: 200px;
            margin-right: 200px;
            margin-top: 50px;
            margin-bottom: 50px;
        }
        #reserv_content_box {
            width: 50%; /*405px*/
            height: 100%; /*628px*/
            float: left;
        }
        #reserv_content_box2 {
            width: 25%; /*202.5px*/
            height: 100%; /*628px*/
            float: left;
        }
        #reserv_content {
            width:100%;
            height: 60px;
            font-size: 20px;
        }
        #reserv_content input, #reserv_content select {
            width: 200px;
            height: 30px;
            font-size: 20px;
            float: right;
            text-align: center;
        }
        #reserv_content button {
            width: 100px;
            height: 30px;
            font-size: 20px;
            margin-left: 152.5px;
        }
        #download_box {
            text-align: center;
            vertical-align: center;
            width: 100%;
            height: 50px;
            margin-top: 60px;
        }
        #download_box a {
            font-size: 30px;
        }


        /**/
        .modal-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }

        .modal-box {
            background: white;
            width: 600px;
            height: 600px;
            border-radius: 10px;
        }
        .modal-title{
            text-align: center;
        }
        .modal-content {
            margin-left: 50px;
        }
        .modal-close-box {
            text-align: right;
            margin-right: 10px;
        }
    </style>
  </head>
  <body width="100%" height="100%">
    <div id="login_div" class="main-div">
      <div id='blank'></div>
      <h1>건국대학교 수의대</h1>
      <h2>강의실 예약 관리자 페이지</h2>
      <form action="loginPro.jsp" method="post" class="loginForm">
        <h2>로그인(Login)</h2>
        <div class="idForm">
          <input id="idInput" name="email" type="text" class="id" placeholder="이메일(E-Mail)">
        </div>
        <div class="passForm">
          <input id="pwInput" name="password" type="password" class="pw" placeholder="비밀번호(Password)">
        </div>
        <button type="button" class="btn" onclick="login()">
          로그인(Login)
        </button>
        <div>
          <a id="pw_reset">
            비밀번호 재설정
          </a>
        </div>
      </form>
      <div id='blank2'></div>
      <div class="pw_modal-wrapper">
        <div class="pw_modal-box">
          <br>
          <br>
          <p class="pw_modal-title">비밀번호를 재설정할 이메일을 입력해주새요</p>
          <br>
          <input id="pw_tmp" type="text">
          <br>
          <br>
          <div class="pw_modal-btn-box">
            <button id="pw_modal-confirm-btn">재설정</button>
            <button id="pw_modal-close-btn">취소</button>
          </div>
          <br>
        </div>
      </div>
      <script>
        function pwReset(){
          const email = document.getElementById("pw_tmp").value;
          document.getElementById("pw_tmp").value = null;
          firebase.auth().sendPasswordResetEmail(email)
          .then(() => {
            alert('비밀번호 재설정 이메일이 발송되었습니다.');
          })
          .catch((error) => {
            var errorCode = error.code;
            var errorMessage = error.message;
            if(errorCode === "auth/user-not-found"){
              alert('존재하지 않는 이메일 입니다.');
            }else{
              console.log(errorCode,errorMessage);
            }
          });
        }
      </script>
      <script>
        const pwmodalOpenBtn = document.getElementById("pw_reset");
        const pwmodalCloseBtn = document.getElementById("pw_modal-close-btn");
        const pwmodalConfirmBtn = document.getElementById("pw_modal-confirm-btn");
        const pwmodalWrapper = document.querySelector(".pw_modal-wrapper");

        pwmodalOpenBtn.addEventListener("click", () => {
          pwmodalWrapper.style.display = "flex";
        });
        
        pwmodalCloseBtn.addEventListener("click", e => {
          document.getElementById("pw_tmp").value = null;
          pwmodalWrapper.style.display = "none";
        });

        pwmodalConfirmBtn.addEventListener("click", e => {
          if(document.getElementById("pw_tmp").value.trim() === ""){
            alert('이메일을 입력하세요');
          }else if(document.getElementById("pw_tmp").value.indexOf('@') === -1){
            alert('올바르지 않은 이메일 형식입니다.');
          }else{
            pwmodalWrapper.style.display = "none";
            pwReset();
          }
        });

        pwmodalWrapper.addEventListener("click", e => {
        });
      </script>
    </div>
    <div id="user_div" class="loggedin-div" style="display: none;">
      <script type="text/javascript">
        function show_layer(div_name) {
            document.all.div_01.style.display="none";
            document.all.div_02.style.display="none";
            document.all.div_03.style.display="none";
            document.all.div_04.style.display="none";
            document.all.div_05.style.display="none";
            document.all.nav_01.style.display="none";
            document.all.nav_02.style.display="none";
            document.all.nav_03.style.display="none";
            document.all.nav_04.style.display="none";
            document.all.nav_05.style.display="none";
            document.all.explain_01.style.display="none";
            document.all.explain_02.style.display="none";
            document.all.explain_03.style.display="none";
            document.all.explain_04.style.display="none";
            document.all.explain_05.style.display="none";
            document.all.explain_06.style.display="none";
            document.all.explain_07.style.display="none";
            document.all.explain_08.style.display="none";
            switch (div_name) {
                case '1':
                    document.all.div_01.style.display="";
                    document.all.nav_01.style.display="";
                    document.all.explain_01.style.display="";
                    break;
                case '2':
                    document.all.div_02.style.display="";
                    document.all.nav_02.style.display="";
                    document.all.explain_05.style.display="";
                    break;
                case '3':
                    document.all.div_03.style.display="";
                    document.all.nav_03.style.display="";
                    document.all.explain_06.style.display="";
                    break;
                case '4':
                    document.all.div_04.style.display="";
                    document.all.nav_04.style.display="";
                    document.all.explain_07.style.display="";
                    break;
                case '5':
                    document.all.div_05.style.display="";
                    document.all.nav_05.style.display="";
                    document.all.explain_08.style.display="";
                    break;
            }
        }
      </script>
      <script type="text/javascript">
          function show_content(div_name) {
              document.all.content_01.style.display="none";
              document.all.content_02.style.display="none";
              document.all.content_03.style.display="none";
              document.all.content_04.style.display="none";
              document.all.content_01_title.style.display="none";
              document.all.content_02_title.style.display="none";
              document.all.content_03_title.style.display="none";
              document.all.content_04_title.style.display="none";
              document.all.explain_01.style.display="none";
              document.all.explain_02.style.display="none";
              document.all.explain_03.style.display="none";
              document.all.explain_04.style.display="none";
              document.all.explain_05.style.display="none";
              document.all.explain_06.style.display="none";
              document.all.explain_07.style.display="none";
              document.all.explain_08.style.display="none";
              switch (div_name) {
                  case '1':
                      document.all.content_01.style.display="";
                      document.all.content_01_title.style.display="";
                      document.all.explain_01.style.display="";
                      break;
                  case '2':
                      document.all.content_02.style.display="";
                      document.all.content_02_title.style.display="";
                      document.all.explain_02.style.display="";
                      break;
                  case '3':
                      document.all.content_03.style.display="";
                      document.all.content_03_title.style.display="";
                      document.all.explain_03.style.display="";
                      break;
                  case '4':
                      document.all.content_04.style.display="";
                      document.all.content_04_title.style.display="";
                      document.all.explain_04.style.display="";
                      break;
              }
          }
      </script>
      
      <div class="container">
        <header>
            <div id="help">
                <a id="explain"><i class="fas fa-exclamation-circle" style="color:white"></i> 도움말</a>
            </div>
            <div id='item'>
                <a id='logout' href="javascript:logout()">
                    로그아웃
                </a>
            </div>
            <div id='divor'>  |  </div>
            <div id='display_name'></div>
        </header>
        <section>
            <ul>
                <li><a href="javascript:location.reload()"><img class="ku_logo" src="src/img/건국대 로고1.gif" height="60px" alt="ku logo"></a></li>
                <li><a id='section_blank'></a></li>
                <li><a id='item2' href="javascript:show_layer('1')">예약조회</a></li>
                <li><a id='item2' href="javascript:show_layer('2')">예약하기</a></li>
                <li><a id='item2' href="javascript:show_layer('3')">대량등록</a></li>
                <li><a id='item2' href="javascript:show_layer('4')">다운로드</a></li>
                <li><a id='item2' href="javascript:show_layer('5')">노션링크</a></li>
            </ul>
        </section>
        <nav>
            <div id=nav_01>
                <div id="blank_box"></div>
                <div id="nav_title">
                    <u>
                        <a id="nav_title_Text" href="javascript:show_content('1')">전체 예약 조회하기</a>
                    </u>
                </div>
                <div id="nav_title">
                    <u>
                        <a id="nav_title_Text" href="javascript:show_content('2')">대기 예약 조회하기</a>
                    </u>
                </div>
                <div id="nav_title">
                    <u>
                        <a id="nav_title_Text" href="javascript:show_content('3')">지난 예약 조회하기</a>
                    </u>
                </div>
                <div id="nav_title">
                    <u>
                        <a id="nav_title_Text" href="javascript:show_content('4')">삭제된 예약 조회하기</a>
                    </u>
                </div>
            </div>
            <div id=nav_02 style="display:none">
                <div id="nav_title">
                </div>
            </div>
            <div id=nav_03 style="display:none">
                <div id="nav_title">
                </div>
            </div>
            <div id=nav_04 style="display:none">
                <div id="nav_title">
                </div>
            </div>
            <div id=nav_05 style="display:none">
                <div id="nav_title">
                </div>
            </div>
        </nav>
        <aside>
            <div id=div_01>
                <div id="title">
                    <a id="title_Text">예약조회</a>
                    <div>
                        <a id="title_Text"> - </a>
                    </div>
                    <div id=content_01_title>
                        <a id="title_Text">전체 예약 조회하기</a>
                    </div>
                    <div id=content_02_title style="display:none">
                        <a id="title_Text">대기 예약 조회하기</a>
                    </div>
                    <div id=content_03_title style="display:none">
                        <a id="title_Text">지난 예약 조회하기</a>
                    </div>
                    <div id=content_04_title style="display:none">
                        <a id="title_Text">삭제된 예약 조회하기</a>
                    </div>
                </div>
                <div id=content_01>
                    <div id="select_box">
                        <div id="selected_box_title">
                            기간 : 
                            시작일자 <input type="date">
                            종료일자 <input type="date">
                        </div>
                        <div id="selected_box_title">
                            호실 : 
                            <select>
                                <option>전체</option>
                                <option>수의학관/106</option>
                                <option>수의학관/107</option>
                                <option>수의학관/207</option>
                                <option>수의학관/216</option>
                                <option>수의학관/225</option>
                                <option>수의학관/306</option>
                                <option>수의학관/307</option>
                                <option>수의학관/408</option>
                                <option>수의학관/409</option>
                                <option>수의학관/410</option>
                                <option>수의학관/432</option>
                                <option>수의학관/509</option>
                                <option>수의학관/510</option>
                                <option>수의학관/511</option>
                                <option>수의학관/523</option>
                                <option>동물생명과학관/710-3</option>
                                <option>동물생명과학관/710-4</option>
                            </select>
                        </div>
                        <div id="selected_box_title">
                            예약 상태 : 
                            <select>
                                <option>전체</option>
                                <option>대기중</option>
                                <option>승인됨</option>
                            </select>
                        </div>
                        <div id="selected_box_title2">
                            <button onclick="">조회하기</button>
                        </div>
                    </div>
                    <div id="table">
                        <table id="table_01">
                            <thead>
                                <tr style="cursor:default">
                                    <th><input name="sel_01" type="checkbox" onclick="selectAll(this)"></th>
                                    <th>No. </th>
                                    <th>예약 상태</th>
                                    <th>예약 날짜</th>
                                    <th>시간</th>
                                    <th>구분</th>
                                    <th>건물</th>
                                    <th>호실</th>
                                    <th>신청자</th>
                                    <th>연락처</th>
                                    <th>목적</th>
                                    <th>사용자 메일</th>
                                    <th>담당 교수</th>
                                    <th>신청일자</th>
                                    <th>승인자</th>
                                    <th>승인일자</th>
                                </tr>
                            <tbody id="content_01_tbody">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id=content_02 style="display:none">
                </div>
                <div id=content_03 style="display:none">
                </div>
                <div id=content_04 style="display:none">
                </div>
            </div>
            <div id=div_02 style="display:none">
            </div>
            <div id=div_03 style="display:none">
            </div>
            <div id=div_04 style="display:none">
            </div>
            <div id=div_05 style="display:none">
            </div>
        </aside>
      </div>
    </div>
  </body>
</html>
